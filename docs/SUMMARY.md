# ReadingAgent åŸºç¡€è®¾æ–½å®Œæˆæ€»ç»“

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### 1. é¡¹ç›®ç›®å½•ç»“æ„
```
âœ… data/              - æ•°æ®åº“å­˜å‚¨ç›®å½•
âœ… uploads/           - PDF ä¸Šä¼ ç›®å½•
âœ… markdown/          - Markdown æ–‡ä»¶ç›®å½•
âœ… static/            - å‰ç«¯é™æ€èµ„æºï¼ˆcss/js/imagesï¼‰
âœ… templates/         - Flask æ¨¡æ¿ç›®å½•
âœ… prompts/v1.0/      - Prompt æ¨¡æ¿ç›®å½•
âœ… docs/              - æ–‡æ¡£ç›®å½•
```

### 2. æ ¸å¿ƒæ¨¡å—

#### config.py âœ…
- æ•°æ®åº“é…ç½®
- æ–‡ä»¶ä¸Šä¼ é…ç½®
- Prompt é…ç½®
- Flask åº”ç”¨é…ç½®
- æ™ºèƒ½ä½“æ˜ å°„é…ç½®

#### db.py âœ…
- SQLite æ•°æ®åº“åˆå§‹åŒ–
- sessions è¡¨åˆ›å»ºä¸ç´¢å¼•
- å®Œæ•´çš„ CRUD æ“ä½œï¼š
  - `create_session()` - åˆ›å»ºä¼šè¯
  - `get_user_sessions()` - è·å–ç”¨æˆ·ä¼šè¯åˆ—è¡¨
  - `get_session()` - è·å–å•ä¸ªä¼šè¯
  - `update_session()` - æ›´æ–°ä¼šè¯
  - `update_chat_history()` - æ›´æ–°èŠå¤©è®°å½•
  - `delete_session()` - åˆ é™¤ä¼šè¯

#### prompt_manager.py âœ…
- Prompt ç‰ˆæœ¬åŒ–ç®¡ç†
- åŠ¨æ€åŠ è½½æœºåˆ¶
- ç¼“å­˜ä¼˜åŒ–
- FSM çŠ¶æ€è‡ªåŠ¨æ˜ å°„
- æ ¸å¿ƒæ–¹æ³•ï¼š
  - `get_prompt()` - è·å– Prompt
  - `list_versions()` - åˆ—å‡ºç‰ˆæœ¬
  - `list_agents()` - åˆ—å‡ºæ™ºèƒ½ä½“
  - `set_default_version()` - è®¾ç½®é»˜è®¤ç‰ˆæœ¬
  - `clear_cache()` - æ¸…é™¤ç¼“å­˜

### 3. Prompt æ–‡ä»¶ç»“æ„

å·²åˆ›å»º 9 ä¸ªæ™ºèƒ½ä½“çš„ Prompt æ¨¡æ¿æ–‡ä»¶ï¼š

**æ ¸å¿ƒæ™ºèƒ½ä½“ï¼ˆ7ä¸ªï¼‰ï¼š**
- âœ… guidance_agent.md - æ–‡çŒ®å¯¼è¯»æ™ºèƒ½ä½“
- âœ… control_agent.md - ä¸­æ§æ™ºèƒ½ä½“
- âœ… introduction_agent.md - å¼•è¨€æ™ºèƒ½ä½“
- âœ… review_agent.md - ç»¼è¿°æ™ºèƒ½ä½“
- âœ… method_agent.md - å®éªŒæ–¹æ³•æ™ºèƒ½ä½“
- âœ… result_agent.md - å®éªŒç»“æœæ™ºèƒ½ä½“
- âœ… discussion_agent.md - è®¨è®ºæ™ºèƒ½ä½“

**æ‰©å±•æ™ºèƒ½ä½“ï¼ˆ2ä¸ªï¼Œé¢„ç•™ï¼‰ï¼š**
- âœ… concept_agent.md - æ¦‚å¿µæ¾„æ¸…æ™ºèƒ½ä½“
- âœ… general_agent.md - é€šç”¨æ™ºèƒ½ä½“

### 4. é…ç½®æ–‡ä»¶

#### prompt_config.json âœ…
```json
{
  "versions": {
    "v1.0": {
      "description": "åˆå§‹ç‰ˆæœ¬ - æ ¸å¿ƒæ™ºèƒ½ä½“",
      "created_at": "2025-10-24",
      "agents": { ... }
    }
  },
  "default_version": "v1.0",
  "agent_mapping": { ... }
}
```

#### requirements.txt âœ…
```
Flask==3.0.0
openai==1.12.0
python-dotenv==1.0.0
Werkzeug==3.0.1
```

### 5. æ–‡æ¡£

- âœ… PROJECT_STRUCTURE.md - é¡¹ç›®ç»“æ„å®Œæ•´è¯´æ˜æ–‡æ¡£
- âœ… SUMMARY.md - æœ¬æ€»ç»“æ–‡æ¡£

## âœ… æµ‹è¯•éªŒè¯

### æ•°æ®åº“æµ‹è¯•
```bash
$ python db.py
âœ… æ•°æ®åº“åˆå§‹åŒ–å®Œæˆ
```

### Prompt ç®¡ç†å™¨æµ‹è¯•
```bash
$ python prompt_manager.py
âœ… åŠ è½½ Prompt é…ç½®: 1 ä¸ªç‰ˆæœ¬
å¯ç”¨ç‰ˆæœ¬: ['v1.0']
å¯ç”¨æ™ºèƒ½ä½“: ['guidance', 'control', 'introduction', 'review', ...]
âœ… æˆåŠŸåŠ è½½ guidance_agent prompt
âœ… æˆåŠŸé€šè¿‡çŠ¶æ€ååŠ è½½ prompt
```

## ğŸ“ ä¸‹ä¸€æ­¥å·¥ä½œ

### ç«‹å³å¯ä»¥åšçš„ï¼š
1. **å¡«å…… Prompt å†…å®¹**
   - ç¼–è¾‘ `prompts/v1.0/` ä¸‹çš„å„ä¸ª `.md` æ–‡ä»¶
   - å¡«å…¥å®Œæ•´çš„ç³»ç»Ÿæç¤ºè¯

2. **å¼€å§‹å‰ç«¯å¼€å‘**
   - åˆ›å»ºæ¬¢è¿é¡µ (`templates/welcome.html`)
   - åˆ›å»ºä¸»é¡µ (`templates/index.html`)
   - ç¼–å†™å‰ç«¯æ ·å¼å’Œäº¤äº’é€»è¾‘

### åç»­å¼€å‘ï¼š
3. **Flask åº”ç”¨å¼€å‘**
   - åˆ›å»º `app.py` - Flask ä¸»åº”ç”¨
   - å®ç° API è·¯ç”±
   - é›†æˆæ•°æ®åº“å’Œ Prompt ç®¡ç†å™¨

4. **LLM é›†æˆ**
   - åˆ›å»º LLM è°ƒç”¨æ¨¡å—
   - å®ç°æ™ºèƒ½ä½“ç¼–æ’é€»è¾‘
   - å¤„ç†æµå¼è¾“å‡º

5. **PDF å¤„ç†**
   - å®ç° PDF ä¸Šä¼ 
   - PDF è½¬ Markdown
   - æ–‡æœ¬æå–ä¸å¤„ç†

## ğŸ¯ å½“å‰çŠ¶æ€

**åŸºç¡€è®¾æ–½ï¼šå®Œæˆ âœ…**
- æ•°æ®åº“ï¼šå°±ç»ª âœ…
- Prompt ç®¡ç†ï¼šå°±ç»ª âœ…
- é…ç½®ç³»ç»Ÿï¼šå°±ç»ª âœ…
- é¡¹ç›®ç»“æ„ï¼šå°±ç»ª âœ…

**ä¸‹ä¸€ä¸ªé‡Œç¨‹ç¢‘ï¼šå‰ç«¯å¼€å‘**
- æ‰€æœ‰åŸºç¡€è®¾æ–½å·²å‡†å¤‡å®Œæ¯•
- å¯ä»¥å¼€å§‹å‰ç«¯é¡µé¢å¼€å‘
- å‚è€ƒ example é¡¹ç›®çš„è®¾è®¡é£æ ¼

---

*æ€»ç»“åˆ›å»ºæ—¶é—´: 2025-10-24*
